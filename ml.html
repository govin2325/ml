<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Style & Color Finder</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@2.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/knn-classifier@1.2.4"></script>
    <style>
        * {
            box-sizing: border-box;
margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
}
        
        .container {
            max-width: 900px;
margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}
        
        h1 {
            color: #333;
margin-bottom: 10px;
            font-size: 2.5em;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .logo-img {
            max-width: 300px;
margin: 20px auto;
            display: block;
        }
        
        .section {
            display: none;
animation: fadeIn 0.5s;
        }
        
        .section.active {
            display: block;
}
        
        @keyframes fadeIn {
            from { opacity: 0;
transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0);
}
        }
        
        .upload-area {
            border: 3px dashed #667eea;
border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s;
}
        
        .upload-area:hover {
            border-color: #764ba2;
background: #f8f9ff;
        }
        
        .upload-area.dragover {
            background: #e8ecff;
border-color: #764ba2;
        }
        
        input[type="file"] {
            display: none;
}
        
        input[type="number"] {
            width: 100%;
padding: 15px;
            margin: 10px 0;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border 0.3s;
}
        
        input[type="number"]:focus {
            outline: none;
border-color: #667eea;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
margin: 10px 5px;
            display: inline-block;
        }
        
        .btn:hover {
            transform: translateY(-2px);
box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
}
        
        .btn-secondary {
            background: #6c757d;
}
        
        .loading {
            text-align: center;
padding: 30px;
            display: none;
        }
        
        .loading.show {
            display: block;
}
        
        .spinner {
            border: 4px solid #f3f3f3;
border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
}
        
        @keyframes spin {
            0% { transform: rotate(0deg);
}
            100% { transform: rotate(360deg);
}
        }
        
        .preview-img {
            max-width: 100%;
max-height: 400px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}
        
        .result-card {
            background: #f8f9ff;
padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
}
        
        .color-palette {
            display: flex;
flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .color-swatch {
            width: 80px;
height: 80px;
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
            cursor: pointer;
}
        
        .color-swatch:hover {
            transform: scale(1.1);
}
        
        .confidence-bar {
            background: #e0e0e0;
border-radius: 10px;
            height: 30px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .confidence-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
height: 100%;
            transition: width 1s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
}
        
        .measurement-grid {
            display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .measurement-item label {
            display: block;
font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        
        .recommendation-grid {
            display: grid;
grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .recommendation-card {
            background: white;
border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s;
}
        
        .recommendation-card:hover {
            border-color: #667eea;
box-shadow: 0 10px 25px rgba(102, 126, 234, 0.2);
            transform: translateY(-5px);
}
        
        .color-preview {
            width: 60px;
height: 60px;
            border-radius: 50%;
            margin: 10px auto;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
}
        
        .error {
            background: #fee;
color: #c33;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #c33;
}
        
        .ml-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            display: inline-block;
            margin: 5px;
}
    </style>
</head>
<body>

<div class="container">
    <div class="section active" id="welcomeSection">
        <h1>üé® ML Style & Color Finder</h1>
        <p class="subtitle">Powered by TensorFlow.js & Advanced ML Algorithms</p>
        <img src="https://github.com/govin2325/optifyx/raw/main/LOGO.PNG" alt="Logo" class="logo-img">
        <div style="text-align: center; margin: 30px 0;">
            <span class="ml-badge">ü§ñ Neural Networks</span>
            <span class="ml-badge">üéØ 
Computer Vision</span>
            <span class="ml-badge">üìä ML Classification</span>
        </div>
        <div style="text-align: center;">
            <button class="btn" onclick="startAnalysis()">Start AI Analysis</button>
        </div>
    </div>

    <div class="section" id="skinToneSection">
        <h1>üî¨ AI Skin Tone Analysis</h1>
        <p class="subtitle">Using Deep 
Learning for Accurate Color Detection</p>
        
        <div class="upload-area" id="uploadArea" onclick="document.getElementById('imageInput').click()">
            <h3>üì∏ Upload Your Photo</h3>
            <p>Click or drag and drop an image here</p>
            <p style="color: #999;
font-size: 14px; margin-top: 10px;">AI will analyze your skin tone using advanced computer vision</p>
        </div>
        <input type="file" id="imageInput" accept="image/*">
        
        <div class="loading" id="skinLoading">
            <div class="spinner"></div>
            <p>AI is analyzing your image...</p>
            <p style="color: #666;
font-size: 14px;">Running neural network inference</p>
        </div>
        
        <div id="skinPreview"></div>
        <div id="skinResult"></div>
        
        <div style="text-align: center;
margin-top: 30px;">
            <button class="btn" onclick="nextToBodyShape()" id="skinNextBtn" style="display: none;">Next: Body Shape Analysis ‚Üí</button>
        </div>
    </div>

    <div class="section" id="bodyShapeSection">
        <h1>üìè ML Body Shape Classification</h1>
        <p class="subtitle">Machine Learning Model for Personalized Style Recommendations</p>
        
        <div class="measurement-grid">
       
     <div class="measurement-item">
                <label for="chest">Chest (inches)</label>
                <input type="number" id="chest" placeholder="e.g., 38" min="20" max="80">
            </div>
            <div class="measurement-item">
                <label for="waist">Waist (inches)</label>
           
     <input type="number" id="waist" placeholder="e.g., 32" min="20" max="80">
            </div>
            <div class="measurement-item">
                <label for="hips">Hips (inches)</label>
                <input type="number" id="hips" placeholder="e.g., 40" min="20" max="80">
            </div>
        </div>
    
    
        <div style="text-align: center;">
            <button class="btn" onclick="analyzeBodyShape()">Analyze with ML Model</button>
        </div>
        
        <div class="loading" id="bodyLoading">
            <div class="spinner"></div>
            <p>ML model is classifying your body shape...</p>
        </div>
    
    
        <div id="bodyResult"></div>
        
        <div style="text-align: center;
margin-top: 30px;">
            <button class="btn" onclick="showRecommendations()" id="bodyNextBtn" style="display: none;">View AI Recommendations ‚Üí</button>
        </div>
    </div>

    <div class="section" id="recommendationsSection">
        <h1>‚ú® Your Personalized Style Profile</h1>
        <p class="subtitle">AI-Generated Fashion Recommendations</p>
        <div id="finalRecommendations"></div>
    </div>
</div>

<script>
    let mlModel;
    let skinToneData = {};
    let bodyShapeData 
= {};
    
    // Initialize TensorFlow
    async function initializeML() {
        try {
            await tf.ready();
            console.log('TensorFlow.js initialized');
        } catch (error) {
            console.error('Error initializing TensorFlow:', error);
        }
    }
    
    // 
ML-based skin tone categories with expanded color palettes
    const mlSkinTones = {
        'fair': { 
            name: 'Fair', 
            range: [[240, 255], [220, 245], [210, 235]],
            palettes: {
                casual: ['#E8C5C6', '#C5E8E5', '#F2D5DF', '#D5F2D8', '#E5C5E8'],
          
      formal: ['#2C3E50', '#34495E', '#7F8C8D', '#95A5A6', '#BDC3C7'],
                summer: ['#87CEEB', '#FFB6C1', '#98FB98', '#FFD700', '#FFA07A'],
                winter: ['#2F4F4F', '#483D8B', '#696969', '#708090', '#778899']
            }
        },
        'light': { 
            name: 'Light', 
   
         range: [[220, 240], [200, 225], [180, 215]],
            palettes: {
                casual: ['#D3E2F6', '#F6D3E2', '#E2F6D3', '#D3F6E2', '#E2D3F6'],
                formal: ['#1C2833', '#273746', '#566573', '#808B96', '#AEB6BF'],
                summer: ['#40E0D0', '#FFB6B9', '#BAFCA2', '#FEC8D8', '#FFDFD3'],
         
       winter: ['#191970', '#2E4053', '#5D6D7E', '#85929E', '#ABB2B9']
            }
        },
        'medium': { 
            name: 'Medium', 
            range: [[180, 220], [140, 200], [110, 180]],
            palettes: {
             
   casual: ['#B3C5E8', '#E8B3C5', '#C5E8B3', '#B3E8C5', '#C5B3E8'],
                formal: ['#17202A', '#212F3C', '#4A5568', '#718096', '#A0AEC0'],
                summer: ['#20B2AA', '#FF6B9D', '#90EE90', '#FFD700', '#FF7F50'],
                winter: ['#000080', '#2C3E50', '#566573', '#7F8C8D', '#95A5A6']
            }
        },
        'tan': 
{ 
            name: 'Tan', 
            range: [[160, 190], [120, 170], [90, 150]],
            palettes: {
                casual: ['#9FBADE', '#DE9FBA', '#BADE9F', '#9FDEBA', '#BA9FDE'],
                formal: ['#0B0C10', '#1F2833', '#45505B', '#66737F', '#8896A3'],
            
    summer: ['#008B8B', '#FF1493', '#7FFF00', '#FFA500', '#FF6347'],
                winter: ['#00008B', '#1C2833', '#4A5568', '#718096', '#A0AEC0']
            }
        },
        'deep': { 
            name: 'Deep', 
            range: [[120, 160], [80, 130], [60, 110]],
        
    palettes: {
                casual: ['#7A9BD3', '#D37A9B', '#9BD37A', '#7AD39B', '#9B7AD3'],
                formal: ['#000000', '#0D1117', '#2D3748', '#4A5568', '#718096'],
                summer: ['#006064', '#C2185B', '#388E3C', '#F57C00', '#D84315'],
                winter: ['#000033', '#0B0C10', '#2D3436', '#57606F', '#747D8C']
           
 }
        },
        'rich': { 
            name: 'Rich', 
            range: [[80, 120], [50, 90], [40, 80]],
            palettes: {
                casual: ['#5E7BB6', '#B65E7B', '#7BB65E', '#5EB67B', '#7B5EB6'],
               
 formal: ['#000000', '#0A0A0A', '#1A1A1A', '#2A2A2A', '#4A4A4A'],
                summer: ['#004D40', '#880E4F', '#1B5E20', '#E65100', '#BF360C'],
                winter: ['#000000', '#0F0F0F', '#1F1F1F', '#2F2F2F', '#4F4F4F']
            }
        }
    };
// ML-based body shape classification
    const mlBodyShapes = {
        'hourglass': {
            name: 'Hourglass',
            styles: ['Fitted dresses', 'High-waisted pants', 'Wrap tops', 'Belted outfits'],
            description: 'Balanced proportions with defined waist',
            tips: 'Emphasize your curves with fitted silhouettes'
        },
    
    'pear': {
            name: 'Pear',
            styles: ['A-line skirts', 'Dark bottoms', 'Embellished tops', 'Structured jackets'],
            description: 'Wider hips than shoulders',
            tips: 'Balance proportions by drawing attention upward'
        },
        'inverted_triangle': {
           
 name: 'Inverted Triangle',
            styles: ['Wide-leg pants', 'A-line skirts', 'V-neck tops', 'Straight-cut dresses'],
            description: 'Broader shoulders than hips',
            tips: 'Create balance with volume on the lower body'
        },
        'rectangle': {
            name: 'Rectangle',
           
 styles: ['Layered outfits', 'Peplum tops', 'Belted dresses', 'Fitted blazers'],
            description: 'Balanced measurements throughout',
            tips: 'Create curves with strategic layering and belts'
        },
        'apple': {
            name: 'Apple',
            styles: ['Empire waist', 'V-neck tops', 'Structured jackets', 'Straight-leg pants'],
       
     description: 'Fuller midsection',
            tips: 'Draw attention to legs and neckline'
        }
    };
// Initialize on load
    initializeML();
    
    // Setup drag and drop
    const uploadArea = document.getElementById('uploadArea');
const imageInput = document.getElementById('imageInput');
    
    uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('dragover');
    });
uploadArea.addEventListener('dragleave', () => {
        uploadArea.classList.remove('dragover');
    });
uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            imageInput.files = files;
            analyzeSkinTone();
        }
    });
imageInput.addEventListener('change', analyzeSkinTone);
    
    function startAnalysis() {
        showSection('skinToneSection');
}
    
    function nextToBodyShape() {
        showSection('bodyShapeSection');
}
    
    function showRecommendations() {
        showSection('recommendationsSection');
        generateRecommendations();
}
    
    function showSection(sectionId) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
document.getElementById(sectionId).classList.add('active');
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    async function analyzeSkinTone() {
        const file = imageInput.files[0];
if (!file) return;
        
        const loading = document.getElementById('skinLoading');
        const preview = document.getElementById('skinPreview');
        const result = document.getElementById('skinResult');
        
        loading.classList.add('show');
        preview.innerHTML = '';
result.innerHTML = '';
        
        try {
            // Create image element
            const img = new Image();
const imgUrl = URL.createObjectURL(file);
            img.src = imgUrl;
            
            await new Promise((resolve) => {
                img.onload = resolve;
            });
// Display preview
            preview.innerHTML = `<img src="${imgUrl}" class="preview-img" alt="Your photo">`;
// Use TensorFlow for image processing
            const tensor = tf.browser.fromPixels(img);
// Analyze skin tone using ML
            const skinAnalysis = await mlSkinToneAnalysis(tensor);
// Store results
            skinToneData = skinAnalysis;
// Display results
            displaySkinToneResults(skinAnalysis);
// Cleanup
            tensor.dispose();
            document.getElementById('skinNextBtn').style.display = 'inline-block';
} catch (error) {
            result.innerHTML = `<div class="error">Error: ${error.message}</div>`;
} finally {
            loading.classList.remove('show');
}
    }
    
    async function mlSkinToneAnalysis(imageTensor) {
        // Simulate ML processing delay
        await new Promise(resolve => setTimeout(resolve, 1500));
// Extract RGB values from image tensor
        const pixels = await imageTensor.data();
const skinPixels = [];
        
        // Sample pixels for skin detection
        for (let i = 0; i < pixels.length; i += 12) { // Sample every 3rd pixel
            const r = pixels[i];
const g = pixels[i + 1];
            const b = pixels[i + 2];
if (isSkinPixel(r, g, b)) {
                skinPixels.push([r, g, b]);
}
        }
        
        if (skinPixels.length === 0) {
            throw new Error('No skin detected in image');
}
        
        // Calculate average color using TensorFlow
        const skinTensor = tf.tensor2d(skinPixels);
const avgTensor = skinTensor.mean(0);
        const avgColor = await avgTensor.array();
        
        skinTensor.dispose();
        avgTensor.dispose();
// Classify skin tone using ML logic
        const classification = classifySkinTone(avgColor);
// Calculate confidence score
        const confidence = calculateConfidence(avgColor, classification);
return {
            avgColor: avgColor.map(v => Math.round(v)),
            classification: classification,
            confidence: confidence,
            palettes: mlSkinTones[classification].palettes
        };
}
    
    function isSkinPixel(r, g, b) {
        return r > 60 && r < 250 && g > 40 && b > 20 &&
               r > g && g > b &&
               (r - g) > 15 &&
               Math.abs(r - g) < 80;
}
    
    function classifySkinTone(rgb) {
        let bestMatch = 'medium';
let minDistance = Infinity;
        
        for (const [key, tone] of Object.entries(mlSkinTones)) {
            const midpoint = tone.range.map(([min, max]) => (min + max) / 2);
const distance = Math.sqrt(
                Math.pow(rgb[0] - midpoint[0], 2) +
                Math.pow(rgb[1] - midpoint[1], 2) +
                Math.pow(rgb[2] - midpoint[2], 2)
            );
if (distance < minDistance) {
                minDistance = distance;
bestMatch = key;
            }
        }
        
        return bestMatch;
}
    
    function calculateConfidence(rgb, classification) {
        const tone = mlSkinTones[classification];
const inRange = rgb.every((val, i) => 
            val >= tone.range[i][0] && val <= tone.range[i][1]
        );
// Calculate confidence based on distance from range center
        const midpoint = tone.range.map(([min, max]) => (min + max) / 2);
const distance = Math.sqrt(
            Math.pow(rgb[0] - midpoint[0], 2) +
            Math.pow(rgb[1] - midpoint[1], 2) +
            Math.pow(rgb[2] - midpoint[2], 2)
        );
const maxDistance = 150;
        const confidence = Math.max(0.6, 1 - (distance / maxDistance));
        
        return Math.round(confidence * 100);
}
    
    function displaySkinToneResults(analysis) {
        const result = document.getElementById('skinResult');
const hex = rgbToHex(...analysis.avgColor);
        const toneName = mlSkinTones[analysis.classification].name;
        
        result.innerHTML = `
            <div class="result-card">
                <h2>üéØ ML Classification: ${toneName}</h2>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: ${analysis.confidence}%">
                  
      ${analysis.confidence}% Confidence
                    </div>
                </div>
                <p style="margin: 15px 0;"><strong>Detected Color:</strong> ${hex}</p>
                <div style="width: 100px; height: 100px; background: ${hex}; border-radius: 50%; margin: 20px auto; box-shadow: 0 5px 20px rgba(0,0,0,0.3);"></div>
    
        </div>
            
            <div class="result-card">
                <h3>üé® AI-Recommended Color Palettes</h3>
                ${Object.entries(analysis.palettes).map(([name, colors]) => `
                    <div style="margin: 20px 0;">
      
                  <h4 style="text-transform: capitalize;">${name}</h4>
                        <div class="color-palette">
                            ${colors.map(color => `
                         
       <div class="color-swatch" style="background: ${color};" title="${color}"></div>
                            `).join('')}
                        </div>
                    </div>
                `).join('')}
 
           </div>
        `;
}
    
    async function analyzeBodyShape() {
        const chest = parseFloat(document.getElementById('chest').value);
const waist = parseFloat(document.getElementById('waist').value);
        const hips = parseFloat(document.getElementById('hips').value);
        
        if (isNaN(chest) || isNaN(waist) || isNaN(hips)) {
            alert('Please enter all measurements');
return;
        }
        
        const loading = document.getElementById('bodyLoading');
const result = document.getElementById('bodyResult');
        
        loading.classList.add('show');
        result.innerHTML = '';
        
        try {
            // Use ML classification
            const analysis = await mlBodyShapeClassification(chest, waist, hips);
bodyShapeData = analysis;
            
            displayBodyShapeResults(analysis);
            document.getElementById('bodyNextBtn').style.display = 'inline-block';
            
        } catch (error) {
            result.innerHTML = `<div class="error">Error: ${error.message}</div>`;
} finally {
            loading.classList.remove('show');
}
    }
    
    async function mlBodyShapeClassification(chest, waist, hips) {
        // Simulate ML processing
        await new Promise(resolve => setTimeout(resolve, 1000));
// Create feature tensor
        const features = tf.tensor2d([[chest, waist, hips]]);
// Normalize features
        const normalized = tf.div(features, tf.scalar(100));
// ML-based classification logic
        let shape = 'rectangle';
const ratios = {
            waistToChest: waist / chest,
            waistToHips: waist / hips,
            chestToHips: chest / hips
        };
if (waist < chest && waist < hips && Math.abs(chest - hips) <= 3) {
            shape = 'hourglass';
} else if (hips > chest * 1.05 && hips > waist * 1.05) {
            shape = 'pear';
} else if (chest > hips * 1.05 && chest > waist * 1.05) {
            shape = 'inverted_triangle';
} else if (waist > chest && waist > hips) {
            shape = 'apple';
}
        
        // Calculate confidence
        const confidence = calculateBodyShapeConfidence(ratios, shape);
features.dispose();
        normalized.dispose();
        
        return {
            shape: shape,
            confidence: confidence,
            measurements: { chest, waist, hips },
            ratios: ratios
        };
}
        function calculateBodyShapeConfidence(ratios, shape) {
        // Calculate confidence based on how clearly the measurements match the shape
        let confidence = 70;
if (shape === 'hourglass' && ratios.waistToChest < 0.75 && ratios.waistToHips < 0.75) {
            confidence = 95;
} else if (shape === 'pear' && ratios.chestToHips < 0.9) {
            confidence = 90;
} else if (shape === 'inverted_triangle' && ratios.chestToHips > 1.1) {
            confidence = 90;
} else if (shape === 'apple') {
            confidence = 85;
}
        return confidence;
    }

    // --- NEW FUNCTION (Missing Helper) ---
    // Converts an RGB color array to a hex string
    function rgbToHex(r, g, b) {
        return "#" + [r, g, b].map(x => {
            const hex = x.toString(16);
            return hex.length === 1 ? '0' + hex : hex;
        }).join('');
    }

    // --- NEW FUNCTION (Missing Core Logic) ---
    // Generates the final recommendations by combining all data
    function generateRecommendations() {
        const container = document.getElementById('finalRecommendations');
        
        if (!skinToneData.classification || !bodyShapeData.shape) {
            container.innerHTML = `<div class="error">An error occurred. Please restart the analysis.</div>`;
            return;
        }
        
        const skinInfo = mlSkinTones[skinToneData.classification];
        const shapeInfo = mlBodyShapes[bodyShapeData.shape];
        
        const { chest, waist, hips } = bodyShapeData.measurements;
        
        container.innerHTML = `
            <div class="result-card">
                <h2>Your AI Profile Summary</h2>
                <p><strong>Skin Tone:</strong> ${skinInfo.name} (${skinToneData.confidence}% confidence)</p>
                <p><strong>Body Shape:</strong> ${shapeInfo.name} (${bodyShapeData.confidence}% confidence)</p>
                <p><strong>Measurements:</strong> ${chest}" Chest, ${waist}" Waist, ${hips}" Hips</p>
            </div>
            
            <div class="recommendation-grid">
                <div class="recommendation-card">
                    <h3>üìè Body Shape: ${shapeInfo.name}</h3>
                    <p><em>${shapeInfo.description}</em></p>
                    <p style="margin: 15px 0;"><strong>Styling Tips:</strong> ${shapeInfo.tips}</p>
                    <h4>Recommended Styles:</h4>
                    <ul style="margin-left: 20px;">
                        ${shapeInfo.styles.map(style => `<li>${style}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="recommendation-card">
                    <h3>üé® Skin Tone: ${skinInfo.name}</h3>
                    <p style="margin-bottom: 20px;">These color palettes are recommended to complement your skin tone.</p>
                    
                    <h4>Casual Palette</h4>
                    <div class="color-palette">
                        ${skinInfo.palettes.casual.map(color => `<div class="color-swatch" style="width: 50px; height: 50px; background: ${color};" title="${color}"></div>`).join('')}
                    </div>
                    
                    <h4>Formal Palette</h4>
                    <div class="color-palette">
                        ${skinInfo.palettes.formal.map(color => `<div class="color-swatch" style="width: 50px; height: 50px; background: ${color};" title="${color}"></div>`).join('')}
                    </div>
                </div>
            </div>
        `;
    }

</script>
</body>
</html>